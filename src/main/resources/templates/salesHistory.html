<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link id="dark-theme-style" rel="stylesheet"/>
    <title>Отчет по продажам</title>
    <style>
        button {
            color: #fff;
            border: 1px solid #014457;
            border-radius: 5px;
            width: 200px;
            height:35px;
            padding-top:0;
            text-align:center;
            vertical-align:center;
        }
        button:hover { background: #007598; }
        .default { background: #009898; }
    </style>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #009898; height: 36px">
        <div class="container-fluid">
            <img alt="Logo" src="logo.jpg" width="30" height="30">
            <a class="navbar-brand" href="#" style="color: aliceblue; font-family: Harrington; font-size: x-large"><strong>
                Авито 2.0</strong></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarBasic"
                    aria-controls="navbarBasic" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse show" id="navbarBasic">
                <ul class="navbar-nav me-auto mb-2 mb-xl-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#"
                           style="color: aliceblue; font-family: Harrington; font-size: large">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#"
                           style="color: aliceblue; font-family: Harrington; font-size: large">Магазины</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false"
                           style="color: aliceblue; font-family: Harrington; font-size: large">Контакты</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="#">Адреса</a></li>
                            <li><a class="dropdown-item" href="#">Телефоны</a></li>
                            <li><a class="dropdown-item" href="#">Something else</a></li>
                        </ul>
                    </li>
                </ul>
                <input class="form-control me-2"  input type="search" name="text" placeholder="Поиск товаров..."
                       aria-label="Поиск товаров..." id="sb" size="50" style="height: 32px">
                <button class="default" type="submit" onclick="test()" style="height: 32px; width: 80px">Найти</button>

                <ul class="navbar-nav px-4">
                    <li class="nav-item text-nowrap">
                        <button type="button" class="default" data-bs-toggle="modal" data-bs-target="#modal" style="height: 32px">Войти</button>
                    </li>
                </ul>
                <ul class="navbar-nav px-4">
                    <li class="nav-item text-nowrap">
                        <button class="default" href="/logout" style="height: 32px; width: 80px">Выйти</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</head>
<body>
<div class="container-fluid">

    <form>
        <input type="hidden" class="form-control" th:value="${shopId}" id="shopId"/>
    </form>


    <div class="row">
        <div class="col-md-12">
            <br>
            <div class="row">
                <div class="col-md-2">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home"
                           role="tab" aria-controls="v-pills-home" aria-selected="true">Все продажи</a>
                        <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings"
                           role="tab" aria-controls="v-pills-settings" aria-selected="false">Продажи по датам</a>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="tab-content" id="v-pills-tabContent">
                        <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                             aria-labelledby="v-pills-home-tab">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col">
                                        <br>
                                        <h2>Продажи</h2>
                                        <div class="tab-content">
                                            <table class="table table-striped table-sm">

                                                <thead>
                                                <div class="alert alert-secondary" role="alert">
                                                    <b>Таблица продаж всех товаров</b>
                                                </div>
                                                <tr class="table-success">
                                                    <th scope="col">Название предмета</th>
                                                    <th scope="col">Дата заказа</th>
                                                    <th scope="col">Количество проданного товара</th>
                                                    <th scope="col">Себестоимость товара</th>
                                                    <th scope="col">Цена проданного товара</th>
                                                    <th scope="col">Отчет по товару</th>
                                                </tr>
                                                </thead>
                                                <tbody id="allSales">
                                                <script src="allSales.js" th:src="@{allSales.js}"
                                                        type="text/javascript"></script>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="tab-pane fade" id="v-pills-settings" role="tabpanel"
                             aria-labelledby="v-pills-profile-tab">

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col">
                                        <br>
                                        <h2>Продажи</h2>
                                        <div class="tab-content">
                                            <div class="tab-pane fade show active" id="description2">

                                                <div class="alert alert-secondary" role="alert">
                                                    <!--                                                        По датам-->
                                                    <b>Таблица продаж по датам</b>
                                                </div>
                                                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link active" id="pills-home-tab"
                                                           data-toggle="pill" href="#pills-home" role="tab"
                                                           aria-controls="pills-home" aria-selected="true">Отчет за
                                                            конкретный день</a>
                                                    </li>
                                                    <li class="nav-item" role="presentation">
                                                        <a class="nav-link" id="pills-profile-tab" data-toggle="pill"
                                                           href="#pills-profile" role="tab"
                                                           aria-controls="pills-profile" aria-selected="false">Отчет за
                                                            выбранный период</a>
                                                    </li>
                                                </ul>

                                                <div class="tab-content" id="pills-tabContent">
                                                    <div class="tab-pane fade show active" id="pills-home"
                                                         role="tabpanel" aria-labelledby="pills-home-tab">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <form>
                                                                    <label for="date" class="form-label">
                                                                        <h6>Выбери дату</h6></label>
                                                                    <br>
                                                                    <input type="date" class="form-control" id="date"/>
                                                                    <br>
                                                                    <button type="button" onclick="getAllSalesByDate()"
                                                                            class="btn btn-info">
                                                                        Выбрать
                                                                    </button>
                                                                    <br>
                                                                    <br>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="pills-profile" role="tabpanel"
                                                         aria-labelledby="pills-profile-tab">
                                                        <form>
                                                            <div class="row">
                                                                <div class="col-md-6">

                                                                    <label for="date1" class="form-label">
                                                                        <h6>Выбери дату</h6></label>
                                                                    <br>
                                                                    <input type="date" class="form-control" id="date1"/>
                                                                    <br>
                                                                    <button type="button" onclick="getAllSalesByVariousDates()"
                                                                            class="btn btn-info">
                                                                        Выбрать
                                                                    </button>
                                                                    <br>
                                                                    <br>
                                                                </div>

                                                                <div class="col-md-6">

                                                                    <label for="date2" class="form-label">
                                                                        <h6>Выбери дату</h6></label>
                                                                    <br>
                                                                    <input type="date" class="form-control" id="date2"/>
                                                                    <br>

                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>


                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="col">
                                                            <ul class="nav nav-tabs">
                                                                <li class="nav-item">
                                                                    <a class="nav-link active" id="dateSum"
                                                                       data-toggle="tab"
                                                                       href="#sumdate">Полный отчет</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link" data-toggle="tab"
                                                                       href="#datesales">Все продажи в этот период</a>
                                                                </li>
                                                            </ul>
                                                            <br>
                                                            <div class="tab-content">
                                                                <div class="tab-pane fade show active"
                                                                     id="sumdate">
                                                                    <table class="table table-striped table-sm">
                                                                        <thead>
                                                                        <tr class="table-success">
                                                                            <th scope="col">Сумма продаж в этот
                                                                                период
                                                                            </th>
                                                                            <th scope="col">Сумма прибыли в этот
                                                                                период
                                                                            </th>
                                                                        </tr>
                                                                        </thead>
                                                                        <tbody id="timeSales">
                                                                        <script src="date.js" th:src="@{date.js}"
                                                                                type="text/javascript"></script>

                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                                <div class="tab-pane fade"
                                                                     id="datesales">
                                                                    <table class="table table-striped table-sm">
                                                                        <thead>
                                                                        <tr class="table-success">
                                                                            <th scope="col">Название предмета</th>
                                                                            <th scope="col">Количетсво товара
                                                                                проданного в этот период
                                                                            </th>
                                                                            <th scope="col">Сумма проданного товара
                                                                                в этот период
                                                                            </th>
                                                                            <th scope="col">Себестоимость товара
                                                                            </th>
                                                                            <th scope="col">Прибавочная стоимость
                                                                            </th>
                                                                            <th scope="col">Общая прибыль по товару
                                                                                за этот период
                                                                            </th>
                                                                        </tr>
                                                                        </thead>
                                                                        <tbody id="timeSalesItems">
                                                                        <script src="date.js" th:src="@{date.js}"
                                                                                type="text/javascript"></script>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Продажи по предмету</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body modal-xl" id="body">

                <div class="row">
                    <div class="col-md-12">
                        <div class="col">
                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                    <a class="nav-link active" id="add_new_user" data-toggle="tab"
                                       href="#description">Полный отчет</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#newUser">Все продажи предмета</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="description">

                                    <table class="table table-striped table-sm">
                                        <thead>
                                        <div class="alert alert-secondary" role="alert">
                                            <b>Отчет по продажам предмета</b>
                                        </div>
                                        <tr class="table-success">
                                            <th scope="col" id="nm">Название предмета</th>
                                            <th scope="col">Количество продаж</th>
                                            <th scope="col">Сумма продаж</th>
                                            <th scope="col">Сумма прибыли</th>
                                        </tr>
                                        </thead>
                                        <tbody id="itemSales2">
                                        <script src="byItemName.js" th:src="@{byItemName.js}"
                                                type="text/javascript"></script>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="tab-pane fade" id="newUser">
                                    <div class="alert alert-secondary" role="alert">

                                        <table class="table table-striped table-sm">
                                            <thead>
                                            <div class="alert alert-secondary" role="alert">
                                                <b>Список продаж предмета за все время</b>
                                            </div>
                                            <tr class="table-success">
                                                <th scope="col">Название предмета</th>
                                                <th scope="col">Дата заказа</th>
                                                <th scope="col">Количетсво товара проданного в этот день</th>
                                            </tr>
                                            </thead>
                                            <tbody id="wholeSales">
                                            <script src="byItemName.js" th:src="@{byItemName.js}"
                                                    type="text/javascript"></script>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script src="diffDates.js" th:src="@{diffDates.js}" type="text/javascript"></script>
<script type="text/javascript" src="search.js"></script>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
</html>